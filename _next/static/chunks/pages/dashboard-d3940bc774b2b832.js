(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{51075:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(38816)}])},33914:function(e,t,n){"use strict";var a=n(85893),i=n(20745),s=n(67294);let r=null;function o(e){let{content:t,duration:n,type:i}={...e},[r,o]=(0,s.useState)(!0),l=e=>{o(!1)};return setTimeout(()=>{o(!1)},n),(0,a.jsx)("div",{className:"messageTips",children:r?(0,a.jsxs)("div",{className:i,children:[(0,a.jsxs)("div",{className:"justify_align_center",style:{gap:"5px"},children:["info"===i?(0,a.jsx)("img",{src:"/images/icon/info.svg"}):"success"===i?(0,a.jsx)("img",{src:"/images/icon/success.svg"}):"warning"===i?(0,a.jsx)("img",{src:"/images/icon/warning.svg"}):"error"===i?(0,a.jsx)("img",{src:"/images/icon/error.svg"}):null,(0,a.jsx)("p",{children:t})]}),(0,a.jsx)("img",{src:"/images/icon/close3.svg",onClick:l.bind(this)})]}):null})}t.Z={success(e){let{content:t,duration:n}=e;r=document.createElement("div");let s=(0,a.jsx)(o,{content:t,duration:n,type:"success"});i.createRoot(r).render(s),document.body.appendChild(r)},error(e){let{content:t,duration:n}=e;r=document.createElement("div");let s=(0,a.jsx)(o,{content:t,duration:n,type:"error"});i.createRoot(r).render(s),document.body.appendChild(r)},warning(e){let{content:t,duration:n}=e;r=document.createElement("div");let s=(0,a.jsx)(o,{content:t,duration:n,type:"warning"});i.createRoot(r).render(s),document.body.appendChild(r)},info(e){let{content:t,duration:n}=e;r=document.createElement("div");let s=(0,a.jsx)(o,{content:t,duration:n,type:"info"});i.createRoot(r).render(s),document.body.appendChild(r)}}},42869:function(e,t){"use strict";t.Z=[{inputs:[{internalType:"address",name:"_lybra",type:"address"},{internalType:"address",name:"_helper",type:"address"},{internalType:"address",name:"_boost",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"esLBR",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"esLBRBoost",outputs:[{internalType:"contract IesLBRBoost",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"extraRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"finishAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"getBoost",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"helper",outputs:[{internalType:"contract Ihelper",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastTimeRewardApplicable",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lybra",outputs:[{internalType:"contract ILybra",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"notifyRewardAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"pausedByLido",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"refreshReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardPerToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_boost",type:"address"}],name:"setBoost",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_eslbr",type:"address"}],name:"setEsLBR",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"rate",type:"uint256"}],name:"setExtraRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_time",type:"uint256"}],name:"setLockdownPeriod",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_duration",type:"uint256"}],name:"setRewardsDuration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"stakedOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"updatedAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userUpdatedAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]},38816:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var a=n(85893),i=n(20668),s=n(52004),r=n.n(s),o=n(23333),l=n(67294),d=n(69077),u=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintEther",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"preRebaseTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"postRebaseTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"sharesAmount",type:"uint256"}],name:"SharesBurnt",type:"event"},{inputs:[{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_sharesAmount",type:"uint256"}],name:"transferShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"sharesValue",type:"uint256"}],name:"TransferShares",type:"event"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"claimed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_sharesAmount",type:"uint256"}],name:"getMintedEUSDByShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_EUSDAmount",type:"uint256"}],name:"getSharesByMintedEUSD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"sharesOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],c=n(16610),p=n(73424),m=n(42869),y=n(74292),h=n(60423),_=n.n(h),x=n(70794),g=n(2711),b=n.n(g);function v(e){let{tipMessage:t}=(0,l.useContext)(y.S),[n,i]=(0,l.useState)(!0),s=()=>{i(!1)};return(0,l.useEffect)(()=>{b().init({duration:800,delay:0,easing:"ease-in-out"})}),(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)("div",{className:"opersateTip","data-aos":"fade-left",children:(0,a.jsxs)("div",{className:"tipCenter",children:[(0,a.jsxs)("div",{className:"justify_space_between",style:{marginBottom:"10px"},children:[(0,a.jsxs)("div",{className:"tipgap10",children:["success"==t.type?(0,a.jsx)("span",{className:"tipType success",children:(0,a.jsx)("img",{src:"/images/icon/success.svg"})}):(0,a.jsx)("span",{className:"tipType",children:(0,a.jsx)("img",{className:"pedding",src:"/images/icon/load.svg"})}),(0,a.jsx)("p",{children:0==t.tabType?"Mint eUSD":1==t.tabType?"Withdraw ETH":2==t.tabType?"Repay eUSD":3==t.tabType?"Redeem eUSD":"Approve"})]}),(0,a.jsx)("span",{className:"close",onClick:s.bind(this),children:(0,a.jsx)("img",{src:"/images/icon/close3.svg"})})]}),4!==t.tabType?(0,a.jsxs)("div",{className:"justify_space_between",children:[(0,a.jsx)("p",{style:{color:"#849FC3"},children:t.btnName}),(0,a.jsxs)("span",{children:[t.amount," ",t.unit]})]}):null,2==t.inputNum&&4!==t.tabType?(0,a.jsxs)("div",{className:"justify_space_between",children:[(0,a.jsx)("p",{style:{color:"#849FC3"},children:t.btnName2}),(0,a.jsxs)("span",{children:[t.amount2," ",t.unit2]})]}):null,3==t.tabType?(0,a.jsxs)("div",{className:"justify_space_between",children:[(0,a.jsx)("p",{style:{color:"#849FC3"},children:"Receive"}),(0,a.jsxs)("span",{children:[(t.amount/t.ethPrice).toFixed(4)," stETH"]})]}):null]})}):null})}n(21496);var f=n(33914);function N(e){let t,n,i;let{address:s,testLido:r,lybra:o,mockhelper:u,setTipMessage:c}=(0,l.useContext)(y.S),{name:m,stethamount:h,eusdamount:g,tabType:b}=e,N=new x.Z(h),T=new x.Z(g);"Deposit"==m||"Deposit & Mint"==m?(i=o,t="depositStETHToMint",n=[s,N.toFixed(),T.toFixed()]):"Mint"==m?(i=o,t="mint",n=[s,T.toFixed()]):(i=r,t="approve",n=[o,new x.Z(1e77).toFixed()]);let j=async e=>{if("Deposit & Mint"==m&&h/1e18<1){f.Z.warning({content:"A minimum deposit of 1 ETH/stETH is required to mint eUSD.",duration:5e3});return}c({tabType:"approve"==t?4:b,type:"loading",inputNum:2,btnName:"Deposit",amount:h/1e18,unit:"stETH",btnName2:"Mint",amount2:g/1e18,unit2:"eUSD"}),E()},[w,S]=(0,l.useState)(!1),[M,D]=(0,l.useState)(!1),{isLoading:C,write:E,data:R}=(0,d.GG)({mode:"recklesslyUnprepared",address:i,abi:p.Z,functionName:t,args:n,onSuccess(e){D(!0)},onError(e){D(!1)}});(0,d.BX)({hash:null==R?void 0:R.hash,onSuccess(n){D(!1),S(!0),c({tabType:"approve"==t?4:b,type:"success",inputNum:2,btnName:"Deposit",amount:h/1e18,unit:"stETH",btnName2:"Mint",amount2:g/1e18,unit2:"eUSD"}),setTimeout(()=>{S(!1)},5e3);let a=localStorage.getItem("iseUsdAsset"),i=localStorage.getItem("eUsdAddress")?localStorage.getItem("eUsdAddress"):[];a&&-1!=i.indexOf(s)||U(),"Mint"==m||e.changeButName("Deposit & Mint"),"approve"!==t&&e.changeInputVal()}});let U=async()=>{ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:o,symbol:"eUSD",decimals:18}}}).then(e=>{if(e){let e=localStorage.getItem("eUsdAddress");if(localStorage.setItem("iseUsdAsset",!0),e)(e=JSON.parse(e)).push(s),localStorage.setItem("eUsdAddress",JSON.stringify(e));else{let e=[];e.push(s),localStorage.setItem("eUsdAddress",JSON.stringify(e))}}else throw Error("Something went wrong.")}).catch(console.error)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:C||M?"".concat(_().button," ","button"," ","disable"):"".concat(_().button," ","button"," ","blue"),onClick:()=>!C&&(h>0||g>0)?j():null,children:C||M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"loading",src:"/images/icon/loading.svg"}),m]}):(0,a.jsx)(a.Fragment,{children:m})}),C||M?(0,a.jsx)(v,{}):null,w?(0,a.jsx)(v,{}):null]})}var T=n(58507),j=n.n(T),w=[{inputs:[{internalType:"address",name:"_lybra",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"keeper",type:"address"},{indexed:!1,internalType:"uint256",name:"repayAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"time",type:"uint256"}],name:"ExecuteAutoRepayment",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"time",type:"uint256"}],name:"ServiceFeeChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"triggerCollateralRatio",type:"uint256"},{indexed:!1,internalType:"uint256",name:"expectedCollateralRatio",type:"uint256"}],name:"UserActivatedAutoRepayment",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"}],name:"UserDeactivatedAutoRepayment",type:"event"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"checkExecutionFeasibility",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"disableAutoRepayment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"triggerCollateralRatio",type:"uint256"},{internalType:"uint256",name:"expectedCollateralRatio",type:"uint256"}],name:"enableAutoRepayment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"execute",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getCollateralRatio",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEtherPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lybra",outputs:[{internalType:"contract ILybra",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_fee",type:"uint256"}],name:"setFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRepaymentSettings",outputs:[{internalType:"uint256",name:"triggerCollateralRatio",type:"uint256"},{internalType:"uint256",name:"expectedCollateralRatio",type:"uint256"},{internalType:"bool",name:"active",type:"bool"}],stateMutability:"view",type:"function"}];function S(e){let{mode:t,safeCollateralRate:n,collateralRatioGuardia:i,setIdoTipMessage:s,address:r,lybra:o}=(0,l.useContext)(y.S),[u,c]=(0,l.useState)(!1),[m,h]=(0,l.useState)(0);(0,d.do)({address:o,abi:p.Z,functionName:"allowance",args:[r,i],watch:!0,onSuccess(e){h(new x.Z(e._hex))}});let[_,g]=(0,l.useState)(100);(0,d.do)({address:i,abi:w,functionName:"fee",onSuccess(e){g(new x.Z(e._hex).div(new x.Z(1e18)).toFixed())}});let b=e=>{e.stopPropagation()},v=t=>{e.changeShowProp(t)},N=async e=>{-1!==["-","+","e","E"].indexOf(e.key)&&e.preventDefault()},[T,S]=(0,l.useState)(!1),M=async e=>{S(!T)},[D,C]=(0,l.useState)(!1),[E,R]=(0,l.useState)(),[U,k]=(0,l.useState)(),F=e=>{R(e.target.value)},A=e=>{k(e.target.value)};(0,l.useEffect)(()=>{U>1e3&&k(1e3)},[U]);let[I,H]=(0,l.useState)(!1);(0,d.do)({address:i,abi:w,functionName:"userRepaymentSettings",args:[r],onSuccess(e){H(e.active),S(e.active),!0==e.active&&(R(new x.Z(e[0]._hex).div(new x.Z(1e18)).toFixed()),k(new x.Z(e[1]._hex).div(new x.Z(1e18)).toFixed()))}});let{isLoading:L,write:O,data:B}=(0,d.GG)({mode:"recklesslyUnprepared",address:m<1e26?o:i,abi:m<1e26?p.Z:w,functionName:m<1e26?"approve":T?"enableAutoRepayment":"disableAutoRepayment",args:m<1e26?[i,"115792089237316195423570985008687907853269984665640564039457584007913129639935"]:T?[new x.Z(E).multipliedBy(new x.Z(1e18)).toFixed(),new x.Z(U).multipliedBy(new x.Z(1e18)).toFixed()]:[],onSuccess(e){c(!0)},onError(t){c(!1),e.updateIsLoading(!1)}});(0,d.BX)({hash:null==B?void 0:B.hash,onSuccess(t){c(!1),e.updateIsLoading(!1),e.updateIsSuccess(!0),D?s({title:"Approve eUSD",type:"success"}):(T?(s({title:"Activating CR Guardian",type:"success"}),e.changeOpen(!0)):(s({title:"Turning off CR Guardian",type:"success"}),e.changeOpen(!1)),e.changeShowProp(!1)),C(!1),setTimeout(()=>{e.updateIsSuccess(!1)},5e3)}});let Z=async()=>{if(T){if(U&&E){if(U<E){f.Z.warning({content:"The expectedCollateralRatio needs to be higher than the triggerCollateralRatio.",duration:5e3});return}if(E<=150){f.Z.warning({content:"The triggerCollateralRatio needs to be higher than 150%",duration:5e3});return}if(U<=100*n){f.Z.warning({content:"The expectedCollateralRatio needs to be greater than or equal to "+100*n+"%",duration:5e3});return}s({title:"Activating CR Guardian",type:"loading"}),e.updateIsLoading(!0),O()}else{f.Z.warning({content:"The expectedCollateralRatio needs to be higher than the triggerCollateralRatio.",duration:5e3});return}}else s({title:"Turning off CR Guardian",type:"loading"}),e.updateIsLoading(!0),O()},q=async()=>{C(!0),s({title:"Approve eUSD",type:"loading"}),e.updateIsLoading(!0),O()};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:0==t?"".concat(j().prop):"".concat(j().prop," ").concat(j().prop_dark),onClick:()=>v(!1),children:(0,a.jsxs)("div",{className:j().propMain,onClick:b.bind(this),children:[(0,a.jsxs)("div",{className:"justify_space_between",style:{borderBottom:"1px solid #e4e1e1",padding:"10px 20px"},children:[(0,a.jsx)("p",{className:j().title,children:"CR GUARDIAN SETTINGS"}),(0,a.jsx)("div",{className:j().closeIcon,onClick:()=>v(!1),children:(0,a.jsx)("img",{src:"/images/icon/closeg.svg"})})]}),(0,a.jsxs)("div",{className:j().autoMain,children:[(0,a.jsxs)("div",{className:j().propCenter,children:[(0,a.jsx)("p",{style:{marginBottom:"10px"},children:"To reduce the risk of liquidation, you can set trigger and preferred collateral ratios. When your real-time collateral ratio falls below the trigger value, keepers will automatically help you repay a portion of your debt to increase your collateral ratio to your preferred setting."}),(0,a.jsxs)("span",{children:["Please note: ",(0,a.jsx)("br",{}),"1. Your wallet needs to hold a minimum amount of eUSD (approved and authorised for this contract) for the Keeper to operate within the parameters set.",(0,a.jsx)("br",{}),"2. When auto repayment occurs, an additional service fee of ",_," eUSD will be paid to the Keeper.",(0,a.jsx)("br",{}),"3. The Keeper is sourced from the community and is not affiliated with the Lybra team. If no calls are made, there is still a risk of liquidation."]})]}),(0,a.jsxs)("div",{className:j().propInfo,children:[(0,a.jsxs)("div",{className:j().openSwitch,children:[(0,a.jsx)("span",{children:"CR Guardian"}),(0,a.jsxs)("div",{className:j().switchSpan,children:[(0,a.jsx)("input",{className:"".concat(j().switch_btn," ").concat(j().switch_btn_animbg),type:"checkbox",checked:T,onChange:M.bind(this)}),T?(0,a.jsx)("p",{className:j().open,children:"Open"}):(0,a.jsx)("p",{className:j().close,children:"Close"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("span",{children:"Trigger Collateral Ratio"}),(0,a.jsxs)("div",{className:j().valueInput,children:[(0,a.jsx)("input",{className:j().input,type:"number",placeholder:"e.g. 175",onWheel:e=>e.target.blur(),onKeyDown:N.bind(this),value:E,onChange:F.bind(this)}),(0,a.jsx)("span",{children:"%"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsx)("span",{children:"Preferred Collateral Ratio"}),(0,a.jsxs)("div",{className:j().valueInput,children:[(0,a.jsx)("input",{className:j().input,type:"number",placeholder:"e.g. 200",onWheel:e=>e.target.blur(),onKeyDown:N.bind(this),value:U,onChange:A.bind(this)}),(0,a.jsx)("span",{children:"%"})]})]})]}),m<1e26?(0,a.jsx)("div",{style:{margin:"20px"},className:L||u?"button disable":"button blue",onClick:()=>L?null:q(),children:L||u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"loading",src:"/images/icon/loading.svg"}),"Approve eUSD"]}):(0,a.jsx)(a.Fragment,{children:"Approve eUSD"})}):I||T?(0,a.jsx)("div",{style:{margin:"20px"},className:L||u?"button disable":"button blue",onClick:()=>L?null:Z(),children:L||u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"loading",src:"/images/icon/loading.svg"}),"Confirm"]}):(0,a.jsx)(a.Fragment,{children:"Confirm"})}):(0,a.jsx)("div",{style:{margin:"20px"},className:"button disable",children:"Confirm"})]})]})})})}var M=n(47912);function D(e){let{rate:t,withdraw:n}=e,{borrowed:i,ethPrice:s,deposited:o,mode:u,safeCollateralRate:c,collateralRatioGuardia:p,address:m}=(0,l.useContext)(y.S),[h,_]=(0,l.useState)(!1),x=e=>{_(e)},[g,b]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1),N=async e=>{b(e)},T=async e=>{f(e)},[j,D]=(0,l.useState)(!1);(0,d.do)({address:p,abi:w,functionName:"userRepaymentSettings",args:[m],onSuccess(e){D(e.active)}});let C=e=>{D(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"".concat(r().title),children:["Overview",(0,a.jsxs)("div",{className:r().eth,children:[(0,a.jsx)("img",{src:"/images/icon/weth.svg"}),"ETH/USD $",s.toFixed(2)]})]}),(0,a.jsxs)("div",{className:r().bottom,children:[(0,a.jsxs)("div",{className:"".concat(r().item," ").concat(r().h5item1),children:[(0,a.jsxs)("div",{className:r().showTip,children:[(0,a.jsx)("span",{children:"Collateral Locked"}),(0,a.jsxs)("div",{className:r().qaIcon,children:[(0,a.jsx)("img",{src:0==u?"/images/icon/qa.svg":"/images/icon/qa_dark.svg"}),(0,a.jsx)("p",{className:r().tipMain,children:"Collateral Locked: This is the amount of ETH or stETH that you have deposited on Lybra Protocol in USD value based on the current market price of ETH and stETH."})]})]}),(0,a.jsxs)("p",{children:["$",Number((o*s).toFixed(2)).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"".concat(r().item," ").concat(r().item2," ").concat(r().h5item2),children:[(0,a.jsxs)("div",{className:r().showTip,children:[(0,a.jsx)("span",{children:"Collateral Ratio"}),(0,a.jsxs)("div",{className:r().qaIcon,children:[(0,a.jsx)("img",{src:0==u?"/images/icon/qa.svg":"/images/icon/qa_dark.svg"}),(0,a.jsx)("p",{className:r().tipMain,children:"Collateral Ratio is expressed as a percentage and calculated by dividing the value of your deposited stETH in USD by the amount of your minted eUSD. A lower Collateral Ratio means you have less stETH backing your eUSD, which increases the risk of liquiation."})]})]}),(0,a.jsxs)("div",{className:r().rateSetting,style:{color:t<150?"red":t<100*c?"rgb(236 151 47)":null},children:[t>1e3?"∞":t.toFixed(2)+"%",j?(0,a.jsx)("img",{src:"/images/icon/hovericon.gif",className:r().on,onClick:()=>x(!0)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"".concat(r().showTip," ","h5None"),children:(0,a.jsxs)("div",{className:"".concat(r().qaIcon),children:[(0,a.jsx)("img",{src:"/images/icon/off.svg",className:r().off,onClick:()=>x(!0)}),(0,a.jsx)("p",{className:r().tipMain,style:{marginTop:"-36px",marginLeft:"50px"},children:"CR GUARDIAN SETTINGS"})]})}),(0,a.jsx)("img",{src:"/images/icon/off.svg",className:"".concat(r().off," ","pcNone"),onClick:()=>x(!0)})]})]})]}),(0,a.jsxs)("div",{className:"".concat(r().item," ").concat(r().item3," ").concat(r().h5item1),children:[(0,a.jsxs)("div",{className:r().showTip,children:[(0,a.jsx)("span",{children:"Liquidation Price"}),(0,a.jsxs)("div",{className:r().qaIcon,children:[(0,a.jsx)("img",{src:0==u?"/images/icon/qa.svg":"/images/icon/qa_dark.svg"}),(0,a.jsx)("p",{className:r().tipMain,children:"Liquidation Price: this is the price at which your position will be at risk of being liquidated if the market moves against you and your collateral Ratio falls below the minimum required level."})]})]}),(0,a.jsxs)("p",{children:["$","NaN"!==(1.5*i/o).toFixed(2)?Number((1.5*i/o).toFixed(2)).toLocaleString():0]})]}),(0,a.jsxs)("div",{className:"".concat(r().item," ").concat(r().item1," ").concat(r().h5item2),children:[(0,a.jsx)("span",{children:"eUSD Minted / eUSD Debt"}),(0,a.jsxs)("p",{children:[Number(i.toFixed(2)).toLocaleString()," eUSD"]})]}),(0,a.jsxs)("div",{className:"".concat(r().item," ").concat(r().item2," ").concat(r().h5item1),children:[(0,a.jsx)("span",{children:"Available to Withdraw"}),(0,a.jsxs)("p",{children:[n," ETH"]})]}),(0,a.jsxs)("div",{className:"".concat(r().item," ").concat(r().item3," ").concat(r().h5item2),children:[(0,a.jsx)("span",{children:"Available to Mint"}),t/100<=c?(0,a.jsx)("p",{children:"0 eUSD"}):(0,a.jsxs)("p",{children:[Number(((o*s/c-i)*.99).toFixed(2)).toLocaleString()," eUSD"]})]})]}),h?(0,a.jsx)(S,{changeShowProp:x,updateIsLoading:N,updateIsSuccess:T,changeOpen:C}):null,g?(0,a.jsx)(M.Z,{}):null,v?(0,a.jsx)(M.Z,{}):null]})}function C(e){let t,n;let{address:i,lybra:s,excessIncomeAmount:r,ethPrice:o,setTipMessage:u}=(0,l.useContext)(y.S),{name:c,amount:m,tabType:h,providerList:g}=e,b=new x.Z(m);"Mint"==c?(t="mint",n=[i,b.toFixed()]):"Approve use of eUSD"==c?(t="approve",n=[s,new x.Z(1e77).toFixed()]):"Repay"==c?(t="burn",n=[i,b.toFixed()]):"Withdraw"==c?(t="withdraw",n=[i,b.toFixed()]):m/1e18<=r?(t="excessIncomeDistribution",n=[b.toFixed()]):(t="rigidRedemption",n=[g.address,b.toFixed()]);let[f,N]=(0,l.useState)(!1),[T,j]=(0,l.useState)(!1),{isLoading:w,write:S,data:M}=(0,d.GG)({mode:"recklesslyUnprepared",address:s,abi:p.Z,functionName:t,args:n,onSuccess(e){j(!0)},onError(e){j(!1)}});(0,d.BX)({hash:null==M?void 0:M.hash,onSuccess(n){j(!1),N(!0),u({tabType:"approve"==t?4:h,type:"success",btnName:c,amount:m/1e18,unit:1==h?"stETH":"eUSD",ethPrice:o}),setTimeout(()=>{N(!1)},5e3),"Approve use of eUSD"==c?e.changeButName("Repay"):e.changeInputVal()}});let D=async e=>{u({tabType:"approve"==t?4:h,type:"loading",btnName:c,amount:m/1e18,unit:1==h?"stETH":"eUSD",ethPrice:o}),S()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:w||T?"".concat(_().button," ","button"," ","disable"," ","rateButton"):"".concat(_().button," ","button"," ","blue"," ","rateButton"),onClick:()=>!w&&m>0?D():null,children:w||T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"loading",src:"/images/icon/loading.svg"}),c]}):(0,a.jsx)(a.Fragment,{children:c})}),w||T?(0,a.jsx)(v,{}):null,f?(0,a.jsx)(v,{}):null]})}function E(e){let t;let{address:n,setTipMessage:i,lybra:s}=(0,l.useContext)(y.S),{name:r,stethamount:o,eusdamount:u,tabType:c,eusdMintableAmount:m}=e,h=new x.Z(o),g=new x.Z(u);t=o/1e18<=0?"mint":"depositEtherToMint";let b=async e=>{if(o/1e18<1&&"mint"!==t){f.Z.warning({content:"Deposit should not be less than 1 ETH.",duration:5e3});return}i({tabType:c,type:"loading",inputNum:2,btnName:"Deposit",amount:o/1e18,unit:"ETH",btnName2:"Mint",amount2:u/1e18,unit2:"eUSD"}),M()},[N,T]=(0,l.useState)(!1),[j,w]=(0,l.useState)(!1),{isLoading:S,write:M,data:D}=(0,d.GG)({mode:"recklesslyUnprepared",address:s,abi:p.Z,functionName:t,args:[n,g.toFixed()],overrides:{from:n,value:h.toFixed()},onSuccess(e){w(!0)},onError(e){w(!1)}});(0,d.BX)({hash:null==D?void 0:D.hash,onSuccess(e){w(!1),T(!0),i({tabType:c,type:"success",inputNum:2,btnName:"Deposit",amount:o/1e18,unit:"ETH",btnName2:"Mint",amount2:u/1e18,unit2:"eUSD"}),setTimeout(()=>{T(!1)},5e3);let t=localStorage.getItem("iseUsdAsset"),a=localStorage.getItem("eUsdAddress")?localStorage.getItem("eUsdAddress"):[];t&&-1!=a.indexOf(n)||C()}});let C=async()=>{ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:s,symbol:"eUSD",decimals:18}}}).then(e=>{if(e){let e=localStorage.getItem("eUsdAddress");if(localStorage.setItem("iseUsdAsset",!0),e)(e=JSON.parse(e)).push(n),localStorage.setItem("eUsdAddress",JSON.stringify(e));else{let e=[];e.push(n),localStorage.setItem("eUsdAddress",JSON.stringify(e))}}else throw Error("Something went wrong.")}).catch(console.error)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:S||j?"".concat(_().button," ","button"," ","disable"):"".concat(_().button," ","button"," ","blue"),onClick:()=>!S&&(o>0||u>0)?b():null,children:S||j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"loading",src:"/images/icon/loading.svg"}),r]}):(0,a.jsx)(a.Fragment,{children:r})}),S||j?(0,a.jsx)(v,{}):null,N?(0,a.jsx)(v,{}):null]})}var R=n(44368),U=n.n(R);function k(e){let{rate:t,tabType:n,tokenVal1:i,tokenVal2:s,amount:r,ethType:o}=e,{ethPrice:u,borrowed:c,deposited:p}=(0,l.useContext)(y.S),[m,h]=(0,l.useState)(0);return(0,d.LK)({watch:!0,onSuccess(e){h(e.formatted.gasPrice)}}),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:U().tranOverview,style:{opacity:n<3?"1":"0"},children:[(0,a.jsx)("span",{children:"Transaction overview"}),(0,a.jsxs)("div",{className:U().tranOverviewDiv,children:[(0,a.jsx)("span",{style:{color:"#849FC3",fontWeight:"400"},children:"Collateral Ratio"}),(0,a.jsxs)("div",{className:U().ratio,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:U().right_span,children:t>1e3?"∞":t.toFixed(2)+"%"}),0==n&&(0!==Number(i)||0!==Number(s))||n>0&&0!==Number(r)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:"/images/icon/right_arr.svg"}),(0,a.jsx)("span",{style:{color:"#ffca8a"},children:0==n?Number((Number(i)*u+p*u)/(c+Number(s))*100).toFixed(2)+"%":1==n?c<=0?"∞":Number((p*u-Number(r)*u)/c*100).toFixed(2)+"%":Number(p*u/(c-Number(r)==0?1:c-Number(r))*100)>1e3?"∞":Number(p*u/(c-Number(r)==0?1:c-Number(r))*100).toFixed(2)+"%"})]}):null]}),(0,a.jsx)("span",{className:U().right_span,dangerouslySetInnerHTML:{__html:"Liquidation at < 150%"}})]})]}),(0,a.jsxs)("div",{className:U().gas,children:[(0,a.jsx)("img",{src:"/images/icon/gas.svg"}),0==n&&0==o?(0,a.jsxs)("span",{className:U().right_span,children:["$",(397084*m/1e18*u).toFixed(2)]}):null,0==n&&1==o?(0,a.jsxs)("span",{className:U().right_span,children:["$",(38e4*m/1e18*u).toFixed(2)]}):null,1==n?(0,a.jsxs)("span",{className:U().right_span,children:["$",(27e4*m/1e18*u).toFixed(2)]}):null,2==n?(0,a.jsxs)("span",{className:U().right_span,children:["$",(153e3*m/1e18*u).toFixed(2)]}):null]})]})})}function F(){let{address:e,borrowed:t,testLido:n,lybra:s,mockhelper:h,ethPrice:_,excessIncomeAmount:g,deposited:b,dashTab:v,setDashTab:f,eslbrminterv2:T,mode:j,addressList:w,safeCollateralRate:S}=(0,l.useContext)(y.S),[M,R]=(0,l.useState)(""),[U,F]=(0,l.useState)(""),[A,I]=(0,l.useState)(""),H=(0,l.useRef)(),L=(0,l.useRef)(),[O,B]=(0,l.useState)(0),[Z,q]=(0,l.useState)({});(0,d.do)({address:h,abi:c.Z,functionName:"getRedeemableAmounts",args:[w],watch:!0,onSuccess(e){let t=[];for(let n=0;n<e.length;n++)t.push({amount:new x.Z(e[n]._hex).toFixed()/1e18,address:w[n]});t.sort(function(e,t){return t.amount-e.amount}),q(t[0])}});let[P,G]=(0,l.useState)(!1);(0,d.do)({address:T,abi:m.Z,functionName:"pausedByLido",args:[e],watch:!0,onSuccess(e){G(e)}});let[W,V]=(0,l.useState)(0);(0,d.do)({address:n,abi:u,functionName:"balanceOf",args:[e],watch:!0,onSuccess(e){V(new x.Z(e._hex).div(new x.Z(1e18)))}});let[K,J]=(0,l.useState)("Deposit"),[Q,X]=(0,l.useState)(0);(0,d.do)({address:n,abi:u,functionName:"allowance",args:[e,s],watch:!0,onSuccess(e){X(new x.Z(e._hex).div(new x.Z(1e18)))}});let[Y,$]=(0,l.useState)(0),z=async()=>{let e=eT<=0?0:eT;R(e),Number(e)>0&&Number(U)>0?J("Deposit & Mint"):0>=Number(e)&&Number(U)>0?J("Mint"):J("Deposit")},ee=async()=>{R(W.toFixed()),Q<W?J("Approve use of stETH"):W>0&&Number(U)>0?J("Deposit & Mint"):W<=0&&Number(U)>0?J("Mint"):J("Deposit")},et=async e=>{if(Number(e.target.value)>0){let t=JSON.parse(e.target.value),n=0==ev?eT<=0?0:eT:W.toFixed();t<=n?R(e.target.value):R(n)}else R(e.target.value);0!==ev&&Q<Number(e.target.value)?J("Approve use of stETH"):Number(e.target.value)>0&&Number(U)>0?J("Deposit & Mint"):0>=Number(e.target.value)&&Number(U)>0?J("Mint"):J("Deposit")},en=async e=>{F(e.target.value);let n=(M*_/S+(_*b/S-t)).toFixed(2);Number(e.target.value)>0&&JSON.parse(e.target.value)>Number(n)&&F(n),0!==ev&&Q<Number(M)?J("Approve use of stETH"):Number(M)>0&&Number(e.target.value)>0?J("Deposit & Mint"):0>=Number(M)&&Number(e.target.value)>0?J("Mint"):J("Deposit")},ea=async()=>{let e=((M*_/S+(_*b/S-t))*.99).toFixed(2);F(e),0!==ev&&Q<Number(M)?J("Approve use of stETH"):Number(M)>0&&Number(e)>0?J("Deposit & Mint"):0>=Number(M)&&Number(e)>0?J("Mint"):J("Deposit")},ei=e=>{J(e)},es=()=>{R(""),F(""),I("")},[er,eo]=(0,l.useState)({name:"Mint eUSD",info:"To mint (borrow) eUSD, you are required to deposit a specific amount of collateral (ETH or stETH) using the Lybra platform, or have a pre-existing balance of ETH or stETH within the Lybra Protocol. You can then generate eUSD against your collateral up to a maximum collateral ratio of "+100*S+"%."}),el=async n=>{f(n),I("");let a=(M*_/S+(_*b/S-t)).toFixed(2);0==n?(0!==ev?Q<Number(M)?J("Approve use of stETH"):Number(M)>0&&Number(U)>0?J("Deposit & Mint"):0>=Number(M)&&(Number(U)>0||Number(a)>0)?J("Mint"):J("Deposit"):Number(U)>0?J("Deposit & Mint"):J("Deposit"),eo({name:"Mint eUSD",info:"To mint (borrow) eUSD, you are required to deposit a specific amount of collateral (ETH or stETH) using the Lybra platform, or have a pre-existing balance of ETH or stETH within the Lybra Protocol. You can then generate eUSD against your collateral up to a maximum collateral ratio of "+100*S+"%."})):1==n?(eg<160&&eg>0&&void 0!==e?J("Your collateral Ratio is not healthy"):J("Withdraw"),eo({name:"Withdraw stETH",info:"By withdrawing stETH collateral, you will get your deposited stETH back and reduce your exposure to price fluctuations. However, this also means that your collateral Ratio drops and you may face liquidation if the price of ETH falls below a certain threshold. You should always monitor your loan and keep a healthy collateral Ratio to avoid losing your funds."})):2==n?(J("Repay"),eo({name:"Repay eUSD",info:"If you have borrowed eUSD from Lybra Protocol, you may want to repay some of your debt to increase your collateral Ratio. Your funds will become more stable and safe by doing this. However, you won't be able to continue earning yield from this part of the eUSD once you pay it back."})):(J("Redeem"),eo({name:"Redeem eUSD",info:"At some point, you may consider exchanging your eUSD for stETH. The Lybra Protocol's Rigid Redemption Mechanism ensures a consistent 1:1 exchange rate between eUSD and stETH."}))},[ed,eu]=(0,l.useState)(0);(0,d.do)({address:s,abi:p.Z,functionName:"balanceOf",args:[e],watch:!0,onSuccess(e){eu(new x.Z(e._hex).div(new x.Z(1e18)).toFixed())}});let ec=()=>{I("")},ep=async e=>{let n;n=1==v?O:2==v?t<ed?t:ed:ed<Z.amount?ed:Z.amount,Number(e.target.value)>0?JSON.parse(e.target.value)<=Number(n)?I(e.target.value):I(n):I(e.target.value)},[em,ey]=(0,l.useState)(!1),eh=async()=>{1==v?I(O):2==v?I(t<ed?t:ed):I(ed<Z.amount?ed:Z.amount)},{write:e_}=(0,d.GG)({mode:"recklesslyUnprepared",address:n,abi:u,functionName:"mintEther",onSuccess(e){ey(!0),ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:n,symbol:"tstETH",decimals:18}}}).then(e=>{if(e)console.log("tstETH successfully added to wallet!");else throw Error("Something went wrong.")}).catch(console.error)}});(0,l.useEffect)(()=>{el(v),0==v?H.current.focus():L.current.focus()},[v]);let ex=async e=>{-1!==["-","+","e","E"].indexOf(e.key)&&e.preventDefault()},[eg,eb]=(0,l.useState)(2e3);(0,d.do)({address:h,abi:c.Z,functionName:"getCollateralRate",args:[e],watch:!0,onSuccess(e){eb(Number(e._hex)/1e18)}});let[ev,ef]=(0,l.useState)(0),eN=async e=>{if(ef(e),0!==e){let e=(M*_/S+(_*b/S-t)).toFixed(2);Q<Number(M)?J("Approve use of stETH"):Number(M)>0&&Number(U)>0?J("Deposit & Mint"):0>=Number(M)&&(Number(U)>0||Number(e)>0)?J("Mint"):J("Deposit")}else Number(M)>0&&Number(U)>0?J("Deposit & Mint"):0>=Number(M)&&Number(U)>0?J("Mint"):J("Deposit")},[eT,ej]=(0,l.useState)(0);return(0,d.KQ)({address:e,watch:!0,onSuccess(e){ej(Math.floor((e.formatted-.1)*1e4)/1e4)}}),(0,l.useEffect)(()=>{B(0==t?b:eg/100<=S?0:Math.floor(b*(eg/100-S)/(eg/100)*1e4)/1e4)}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{id:"dashboard"}),(0,a.jsx)("div",{className:0==j?"".concat(r().mint):"".concat(r().mint," ").concat(r().mintDark),children:(0,a.jsx)("div",{className:"section",children:(0,a.jsxs)("div",{className:r().vaultMain,children:[(0,a.jsx)("div",{className:r().top,children:(0,a.jsx)(D,{rate:eg,withdraw:O})}),(0,a.jsxs)("div",{className:r().vaultBottom,children:[(0,a.jsxs)("div",{className:r().left,children:[(0,a.jsx)("div",{className:"".concat(r().overview," ").concat(r().title2),children:er.name}),(0,a.jsx)("p",{className:r().desc,dangerouslySetInnerHTML:{__html:er.info}})]}),(0,a.jsxs)("div",{className:r().right,children:[(0,a.jsxs)("div",{className:r().tabType,children:[(0,a.jsxs)("div",{className:0==v?r().active:"",onClick:el.bind(this,0),children:["Mint",(0,a.jsx)("p",{className:"h5None",children:(0,a.jsx)("img",{src:"images/icon/eusd2.svg"})})]}),(0,a.jsxs)("div",{className:1==v?r().active:"",onClick:el.bind(this,1),children:["Withdraw",(0,a.jsx)("p",{className:"h5None",children:(0,a.jsx)("img",{src:"images/icon/eth2.svg"})})]}),(0,a.jsxs)("div",{className:2==v?r().active:"",onClick:el.bind(this,2),children:["Repay",(0,a.jsx)("p",{className:"h5None",children:(0,a.jsx)("img",{src:"images/icon/eusd2.svg"})})]}),(0,a.jsxs)("div",{className:3==v?r().active:"",onClick:el.bind(this,3),children:["Redeem",(0,a.jsx)("p",{className:"h5None",children:(0,a.jsx)("img",{src:"images/icon/eusd2.svg"})})]})]}),0==v?(0,a.jsxs)("div",{className:r().center,children:[(0,a.jsxs)("div",{className:"justify_space_between",children:[(0,a.jsx)("div",{className:"flex_align_center",children:(0,a.jsxs)("span",{children:["Deposit ",(0,a.jsx)("span",{className:0==ev?"changeeth active":"changeeth",onClick:eN.bind(this,0),children:"ETH"})," / ",(0,a.jsx)("span",{className:1==ev?"changeeth active":"changeeth",onClick:eN.bind(this,1),children:"stETH"})]})}),0==ev?(0,a.jsxs)("span",{className:r().right_span,children:["Available ",eT>0?eT:0," ETH"]}):(0,a.jsxs)("span",{className:r().right_span,children:["Available ",Math.floor(1e6*W.toFixed())/1e6," stETH"]})]}),(0,a.jsxs)("div",{className:r().deposit,children:[(0,a.jsx)("div",{style:{width:"100%"},children:(0,a.jsxs)("div",{className:"justify_space_between",children:[(0,a.jsx)("input",{type:"number",onWheel:e=>e.target.blur(),placeholder:0==ev?"0 ETH":"0 stETH",id:"tokenVal1",onKeyDown:ex.bind(this),onChange:et.bind(this),value:M,ref:H}),(0,a.jsxs)("div",{className:r().usdMax,children:[(0,a.jsxs)("div",{children:["≈ ","NaN"==Number((M*_).toFixed(2)).toLocaleString()?0:Number((M*_).toFixed(2)).toLocaleString()," USD"]}),(0,a.jsx)("div",{className:0==j?"maxBg":"maxBg_dark",onClick:0==ev?z.bind(this):ee.bind(this),children:(0,a.jsx)("span",{className:"max ",children:"MAX"})})]})]})}),(0,a.jsx)("svg",{style:{display:"none"},viewBox:"0 0 32 32",display:"inline-block",focusable:"false",role:"presentation",children:(0,a.jsxs)("g",{fill:"currentColor",children:[(0,a.jsx)("path",{d:"M18.4308 6.40002L22.271 11.2003H6.39984L4.79999 14.4L25.6 14.4003C26.215 14.4003 26.7756 14.0478 27.0421 13.4934C27.3085 12.9391 27.2336 12.2811 26.8494 11.8008L22.5288 6.40002H18.4308Z"}),(0,a.jsx)("path",{d:"M9.47124 25.6003H13.5692L9.729 20.8H25.6002L27.2 17.6003L6.4 17.6C5.78495 17.6 5.22435 17.9526 4.95792 18.5069C4.69149 19.0613 4.7664 19.7193 5.15061 20.1995L9.47124 25.6003Z"})]})})]}),(0,a.jsxs)("div",{className:"justify_space_between",children:[(0,a.jsx)("span",{children:"Mint eUSD"}),!0==P?(0,a.jsxs)("div",{className:"".concat(r().pausedQa," "),children:[(0,a.jsx)("span",{className:r().right_span,children:"Max 0 eUSD "}),(0,a.jsx)("img",{src:0==j?"/images/icon/qa.svg":"/images/icon/qa_dark.svg"}),(0,a.jsx)("p",{className:r().tipMain,children:"The protocol is currently under lockdown for stETH rebasing. Minting and repaying of eUSD functions are temporarily disabled from 12 PM to 1 PM UTC."})]}):(0,a.jsxs)("span",{className:r().right_span,children:["Max ",Number((((M||0)*_/S+(_*b/S-t))*.99).toFixed(2)).toLocaleString()," eUSD"]})]}),(0,a.jsxs)("div",{className:"".concat(r().generate," ","justify_space_between"),children:[(0,a.jsx)("input",{type:"number",onWheel:e=>e.target.blur(),placeholder:"0 eUSD",id:"tokenVal2",onKeyDown:ex.bind(this),onChange:en.bind(this),value:!0==P?0:U}),(0,a.jsxs)("div",{className:0==j?"maxBg":"maxBg_dark",onClick:ea.bind(this),children:[" ",(0,a.jsx)("span",{className:"max ",children:"MAX"})]})]}),(0,a.jsx)(k,{rate:eg,tabType:v,tokenVal1:M,tokenVal2:U,amount:A,ethType:ev}),0==ev?(0,a.jsx)(E,{eusdMintableAmount:Y,tabType:v,name:K,stethamount:1e18*M,eusdamount:1e18*U,changeButName:ei,changeInputVal:es}):(0,a.jsx)(N,{eusdMintableAmount:Y,tabType:v,name:K,stethamount:1e18*M,eusdamount:1e18*U,changeButName:ei,changeInputVal:es})]}):(0,a.jsxs)("div",{className:r().center,children:[(0,a.jsxs)("div",{className:"justify_space_between",children:[(0,a.jsxs)("span",{children:[1==v?"Withdraw stETH":2==v?"Repay eUSD":"Redeem eUSD"," "]}),!0==P&&2==v?(0,a.jsxs)("div",{className:"".concat(r().pausedQa," "),children:[(0,a.jsx)("span",{className:r().right_span,children:"Balance 0 eUSD "}),(0,a.jsx)("img",{src:0==j?"/images/icon/qa.svg":"/images/icon/qa_dark.svg"}),(0,a.jsx)("p",{className:r().tipMain,children:"The protocol is currently under lockdown for stETH rebasing. Minting and repaying of eUSD functions are temporarily disabled from 12 PM to 1 PM UTC."})]}):(0,a.jsx)("span",{className:r().right_span,children:1==v?"Max "+O+" stETH":2==v&&t<ed?"Balance "+Number(Math.floor(100*t)/100).toLocaleString()+" eUSD":"Balance "+Number(Math.floor(100*ed)/100).toLocaleString()+" eUSD"})]}),(0,a.jsxs)("div",{className:"".concat(r().generate," ","flex_align_center"),children:[(0,a.jsx)("input",{type:"number",onWheel:e=>e.target.blur(),placeholder:1==v?"0 stETH":"0 eUSD",id:"amount",onKeyDown:ex.bind(this),onChange:ep.bind(this),value:!0==P?0:A,ref:L}),3==v?(0,a.jsxs)("span",{className:r().right_span,style:{marginRight:"10px"},children:["Fee:",A<=g?0:"NaN"==Number((A/200).toFixed(2)).toLocaleString()?0:A<=g?0:Number((A/200).toFixed(2)).toLocaleString()]}):null,(0,a.jsx)("div",{className:0==j?"maxBg":"maxBg_dark",onClick:eh.bind(this),children:(0,a.jsx)("span",{className:" max ",children:"MAX"})})]}),(0,a.jsx)(k,{rate:eg,tabType:v,tokenVal1:M,tokenVal2:U,amount:A,ethType:ev}),(0,a.jsx)(C,{providerList:Z,tabType:v,name:K,amount:1e18*A,changeButName:ei,changeInputAmount:ec,changeInputVal:es})]})]})]})]})})}),(0,a.jsx)(o.Z,{id:"dashboard"})]})}n(37918)},60423:function(e){e.exports={button:"button_button__gvHhU"}},58507:function(e){e.exports={prop:"protectionSettings_prop__5uPmf",propMain:"protectionSettings_propMain__QmGXp",title:"protectionSettings_title__otU_L",propCenter:"protectionSettings_propCenter__LtTl1",propInput:"protectionSettings_propInput__Swiij",propInfo:"protectionSettings_propInfo__FjRp_",openSwitch:"protectionSettings_openSwitch__3CeOO",valueInput:"protectionSettings_valueInput__Mbvd_",input:"protectionSettings_input__4vFPN",prop_dark:"protectionSettings_prop_dark__EzpVC",closeIcon:"protectionSettings_closeIcon__HECOr",switch_btn:"protectionSettings_switch_btn__KyibA",switch_btn_animbg:"protectionSettings_switch_btn_animbg__foooD",switchSpan:"protectionSettings_switchSpan__Sursy",open:"protectionSettings_open__7tGhd",close:"protectionSettings_close__V_BtS",autoMain:"protectionSettings_autoMain__uuVxa"}},44368:function(e){e.exports={tranOverview:"transactionOverview_tranOverview__6OmsQ",tranOverviewDiv:"transactionOverview_tranOverviewDiv__78eZu",ratio:"transactionOverview_ratio__NHj1y",gas:"transactionOverview_gas__Rrrf_",right_span:"transactionOverview_right_span__cBw7q"}},52004:function(e){e.exports={home:"index_home__ElI5j",topBanner:"index_topBanner__fuLKI",banner:"index_banner__X3HgO",button:"index_button___5BsU",bigLogo:"index_bigLogo__Wt0cb",totalList:"index_totalList__H5zCJ",title:"index_title___brqs",center:"index_center__x0Zyl",works:"index_works__rLaDV",Cards:"index_Cards__mu7bt",Wrapper:"index_Wrapper__A7Ty5",IconWrapper:"index_IconWrapper__1mVSQ",cardInfo:"index_cardInfo__ocaoU",eusd:"index_eusd__bqE67",gap:"index_gap__WhKqz",left:"index_left__eBsko",eusdList:"index_eusdList__6w8go",item:"index_item__tGt2O",dao:"index_dao__SQDme",more:"index_more__4TbI_",daoBg:"index_daoBg__iXDGa",yield2:"index_yield2__IiGhP",list:"index_list__E0czJ",item2:"index_item2__pQLA1",faqbg:"index_faqbg__Ibxlv",titlefaq:"index_titlefaq___OxMM",faq:"index_faq__f52aG",heightAuto:"index_heightAuto__0xfOc",show:"index_show___75Qi",hidden:"index_hidden__ww_5A",vhtml:"index_vhtml__0ildo",info:"index_info__iWBU1",yield:"index_yield__1TF_H",usdl:"index_usdl__pg9F8",usdltop:"index_usdltop__4le6_",mint:"index_mint__O2ZPh",vault:"index_vault__omCtr",right:"index_right__t2c5w",nextPrice:"index_nextPrice__5PtLS",price:"index_price__r9Ekx",min:"index_min__JX9HC",pro:"index_pro__WJ6_7",vaultInfo:"index_vaultInfo__AOYiG",vaultItem:"index_vaultItem__JiDIx",value:"index_value__XvTL2",icon:"index_icon__IdCia",tip:"index_tip__6YIcG",mintDark:"index_mintDark__90K_s",vaultMain:"index_vaultMain__F7gMj",title2:"index_title2__h40Ra",eth:"index_eth__Ku_3m",top:"index_top__iV_iV",bottom:"index_bottom__uT3T2",vaultBottom:"index_vaultBottom__hW7tc",tabType:"index_tabType__AsDlF",overview:"index_overview__Q2tsj",showTip:"index_showTip__vQdC_",item3:"index_item3__shWX4",tipMain:"index_tipMain__N5O6m",qaIcon:"index_qaIcon__1I7KK",desc:"index_desc__1t_Z5",active:"index_active__L1e8f",right_span:"index_right_span__qrMWZ",deposit:"index_deposit__F7BTa",usdMax:"index_usdMax__QUHld",generate:"index_generate__nWR5N",savingsRate:"index_savingsRate__EipIV",tabMenu:"index_tabMenu__ouiaI",hr:"index_hr__vOi_D",history:"index_history__bMndb",link:"index_link__Ex9R3",mintCenter:"index_mintCenter__q6APB",line:"index_line__JAv7d",time:"index_time__qhEvL",main:"index_main__NvCNi",mintInfo:"index_mintInfo__uxJrj",progress:"index_progress__VlZs9",idologo:"index_idologo__Q9LSf",filled:"index_filled__tfqKo",filledBg:"index_filledBg__OLuRk",filledtext:"index_filledtext__Eq_l_",soft:"index_soft__sTKGo",mini:"index_mini__z29N0",hard:"index_hard__eFQ4C",information:"index_information__F2an0",mintval:"index_mintval__dRGbg",number:"index_number__AFfjg",mintBut:"index_mintBut__g5UVY",logo:"index_logo__IeyQD",h5item1:"index_h5item1__Ep6wo",h5item2:"index_h5item2__WU84H",rateSetting:"index_rateSetting__Sfw6l",pausedQa:"index_pausedQa__W_JC6",on:"index_on__3Eu5P",off:"index_off__4SMjd"}}},function(e){e.O(0,[435,486,960,774,888,179],function(){return e(e.s=51075)}),_N_E=e.O()}]);